var sk = new Object();
var update = new Object();
var origin = window.location.origin;
var path = window.location.pathname;
var UserAgent = navigator.userAgent;

sk.getData = function () {
  var url = location.search; //获取url中"?"符后的字串
  var theRequest = new Object();
  if (url.indexOf("?") != -1) {
    var str = url.substr(1);
    strs = str.split("&");
    for (var i = 0; i < strs.length; i++) {
      theRequest[strs[i].split("=")[0]] = decodeURI(strs[i].split("=")[1]);
    }
  }
  return theRequest;
};

sk.sleep = function (time) {
  return new Promise((resolve) => setTimeout(resolve, time));
};

// 未保存提示
sk.noSave = function () {
  window.onbeforeunload = function () {
    return true;
  };
};

// 更新检查
update.check = function (callback) {
  axios.post("/api/update/check").then(function (response) {
    callback(response.data);
  });
};

// 执行更新
update.do = function (callback) {
  axios.post("/api/update/do").then(function (response) {
    callback(response.data);
  });
};

function aesEncrypt(plaintext, key) {
  const cipherText = CryptoJS.AES.encrypt(plaintext, key);
  return cipherText.toString();
}

function aesDecrypt(ciphertext, key) {
  const bytes = CryptoJS.AES.decrypt(ciphertext, key);
  return bytes.toString(CryptoJS.enc.Utf8);
}
